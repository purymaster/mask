console.log("코드 확인은 https://purymaster.github.io/mask/index.bak.html 에서 해주시길 바랍니다.");const dataTable=document.querySelector("tbody"),loading=document.querySelector(".table_wrap"),form=document.querySelector("form"),input=form.querySelector("input"),timer=document.querySelector(".timer"),today=document.querySelector(".year"),spot="spot";let count=60,alertFlag=!1;function setCache(){let t=input.value;localStorage.setItem(spot,t),getData(t)}function getLocation(){form.addEventListener("submit",setCache)}function setBuyYear(t){switch(t){case 1:return"1, 6";case 2:return"2, 7";case 3:return"3, 8";case 4:return"4, 9";case 5:return"5, 0";default:return!1}}function getMaskStock(t){switch(t){case"plenty":return"100개이상";case"some":return"30~99개";case"few":return"2~29개";case"empty":return"재고없음";case"break":return"판매중지";default:return"데이터없음"}}function getData(t){loading.classList.add("on"),fetch(`https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByAddr/json?address=${t}`).then(function(t){return t.json()}).then(function(t){const e=t.stores;let n,a="";if(e.length)for(let t=0;t<e.length;t++)"plenty"===e[t].remain_stat&&(alertFlag=!0),a+=n=`<tr><td><a href="https://map.kakao.com/link/map/${e[t].name},${e[t].lat},${e[t].lng}" target="_blank" title="새창열림">${e[t].name}</a></td><td>${e[t].addr||"데이터없음"}</td><td>${e[t].created_at||"데이터없음"}</td><td>${e[t].stock_at||"데이터없음"}</td><td class="${e[t].remain_stat}">${getMaskStock(e[t].remain_stat)}</td></tr>`,loading.classList.remove("on"),dataTable.innerHTML=a;else n='<tr><td colspan="5" style="margin:0; font-size:14px; font-weight:400; text-align:center !important;">검색결과가 존재하지 않습니다.</td></tr>',loading.classList.remove("on"),dataTable.innerHTML=n;alertFlag&&document.querySelector(".popup").classList.add("on")})}timer.innerHTML=count,function(){setTimeout(function(){location.reload()},1e3*count),setInterval(function(){count--,timer.innerText=count},1e3);let t=(new Date).getDay(),e=localStorage.getItem(spot);input.value=e||"",today.innerText=setBuyYear(t)||"상관없이 모두",e=getData(e)||getLocation()}();